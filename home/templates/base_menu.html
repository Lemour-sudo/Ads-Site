{% extends "base_bootstrap.html" %}

{% block navbar %}
  {% load app_tags %}

  <nav class="navbar fixed-top navbar-expand-lg">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="{% url 'ads:all' %}">{{ settings.APP_NAME }}</a>
      </div>

      <!-- https://stackoverflow.com/questions/22047251/django-dynamically-get-view-url-and-check-if-its-the-current-page -->

      {% if user.is_authenticated %}
        <div class="navbar-text d-none d-sm-block ml-auto">{{request.user.username}}'s AdSpace</div>
      {% endif %}

      <ul class="navbar-nav flex-row ml-auto">
        {% if user.is_authenticated %}
        <li class="nav-item mr-3">
          <a class="nav-link" href="{% url 'ads:ad_create' %}">Create Ad</a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img style="width: 25px;" src="{{ user|gravatar:60 }}" /><b class="caret"></b>
          </a>

          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="{% url 'logout' %}?next={% url 'ads:all' %}">Logout</a>
          </div>
        </li>

        {% else %}
        <li class="nav-item mr-3">
          <a class="nav-link" href="{% url 'login' %}?next={% url 'ads:all' %}">Login</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="{% url 'register:signup' %}">Register</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </nav>

{% endblock %}

{% block footer %}
  <div class="footer">
    <p>Footer</p>
  </div>
{% endblock %}